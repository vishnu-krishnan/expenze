<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expenze ‚Äì Personal Finance Tracker</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="hover-effects.css">
    <link rel="stylesheet" href="button-styles.css">
    <link rel="stylesheet" href="layout.css">
    <!-- Chart.js CDN for rendering charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <header>
        <div class="logo">
            <span class="rupee-icon">‚Çπ</span>
            Expenze
            <span class="tagline">Smart Money Management</span>
        </div>
        <!-- Desktop Navigation -->
        <nav class="desktop-nav">
            <button id="nav-dashboard" onclick="View.showDashboard()">Dashboard</button>
            <button id="nav-month" onclick="View.showMonth()">Monthly Plan</button>
            <button id="nav-categories" onclick="View.showCategories()">Categories</button>
            <button id="nav-templates" onclick="View.showTemplates()">Templates</button>
        </nav>
        <!-- Mobile Navigation Dropdown -->
        <div class="mobile-nav">
            <select id="mobile-nav-select" onchange="View.handleMobileNav(this.value)">
                <option value="dashboard">üìä Dashboard</option>
                <option value="month">üìÖ Monthly Plan</option>
                <option value="categories">üìÅ Categories</option>
                <option value="templates">üìù Templates</option>
            </select>
        </div>
    </header>

    <!-- Breadcrumb Navigation -->
    <div class="breadcrumb" id="breadcrumb">
        <a href="#" onclick="View.showDashboard();return false;">Dashboard</a>
        <span class="breadcrumb-separator">/</span>
        <span class="breadcrumb-current" id="breadcrumb-current">Dashboard</span>
    </div>

    <main id="app">
        <!-- Dashboard View -->
        <section id="view-dashboard" class="view hidden">
            <div class="view-header">
                <h2>Dashboard</h2>
                <div class="dashboard-nav">
                    <button onclick="App.changeDashboardMonth(-1)">‚Üê Prev</button>
                    <input type="month" id="dash-month-picker" onchange="App.loadDashboardMonth(this.value)">
                    <button onclick="App.changeDashboardMonth(1)">Next ‚Üí</button>
                </div>
            </div>
            <div class="cards-container">
                <div class="card" id="card-current-month">
                    <svg class="icon" viewBox="0 0 24 24" fill="var(--primary)">
                        <path
                            d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11zm0-13H5V6h14v1z" />
                    </svg>
                    <h3>Current Month</h3>
                    <p id="dash-current-month">Nov-2025</p>
                    <div class="stat-row"><span>Planned:</span> <span id="dash-planned">0</span></div>
                    <div class="stat-row"><span>Actual:</span> <span id="dash-actual">0</span></div>
                    <div class="stat-row"><strong>Remaining:</strong> <strong id="dash-diff">0</strong></div>
                </div>
                <div class="card" id="card-total-expense">
                    <svg class="icon" viewBox="0 0 24 24" fill="var(--primary)">
                        <path
                            d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z" />
                    </svg>
                    <h3>Total Expenses</h3>
                    <p id="dash-total-expense">0</p>
                </div>
                <div class="card card-warning" id="card-pending">
                    <svg class="icon" viewBox="0 0 24 24" fill="var(--warning)">
                        <path
                            d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" />
                    </svg>
                    <h3>Pending Expenses</h3>
                    <p id="dash-pending-amount">‚Çπ0.00</p>
                    <small id="dash-pending-count" style="color: var(--text-secondary);">0 items unpaid</small>
                </div>
                <div class="card card-success" id="card-savings-goal">
                    <svg class="icon" viewBox="0 0 24 24" fill="var(--success)">
                        <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z" />
                    </svg>
                    <h3>Savings Goal</h3>
                    <p id="dash-savings-goal">0%</p>
                </div>
            </div>
            <!-- Charts Section -->
            <div class="charts-grid">
                <!-- Line Chart -->
                <div class="chart-container">
                    <h3 class="chart-title">Last 6 Months Trend</h3>
                    <div class="chart-wrapper">
                        <canvas id="summary-chart"></canvas>
                    </div>
                </div>
                <!-- Pie Chart -->
                <div class="chart-container">
                    <h3 class="chart-title">Category Breakdown</h3>
                    <div class="chart-wrapper">
                        <canvas id="category-chart"></canvas>
                    </div>
                </div>
            </div>
            <p style="margin-top:2rem;">Select a month in the "Monthly Plan" tab to manage details.</p>
        </section>

        <!-- Categories View -->
        <section id="view-categories" class="view hidden">
            <h2>Categories</h2>
            <div class="panel">
                <h3>Add New Category</h3>
                <form id="form-category" onsubmit="App.createCategory(event)">
                    <div class="form-row">
                        <input type="text" name="name" placeholder="Category Name" required style="flex: 3;">
                        <input type="number" name="sortOrder" placeholder="Sort Order" value="0"
                            style="flex: 1; min-width: 100px;">
                        <button type="submit" class="primary" style="flex: 1; min-width: 120px;">Add Category</button>
                    </div>
                </form>
            </div>
            <div class="panel" style="margin-top: 2rem;">
                <h3>All Categories</h3>
                <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">
                    Categories are sorted by "Sort Order" (lower numbers appear first)
                </p>
                <ul id="list-categories" class="item-list"></ul>
            </div>
        </section>

        <!-- Templates View -->
        <section id="view-templates" class="view hidden">
            <h2>Payment Templates</h2>
            <div class="panel">
                <h3>Create New Template</h3>
                <form id="form-template" onsubmit="App.createTemplate(event)">
                    <div class="form-row">
                        <input type="text" name="name" placeholder="Payment Name (e.g., Rent, Electricity)" required
                            style="flex: 2;">
                        <select name="categoryId" required id="template-cat-select">
                            <option value="">Select Category</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <input type="number" name="defaultPlannedAmount" placeholder="Default Amount" step="0.01"
                            required>
                        <input type="text" name="startMonth" placeholder="Start Month (YYYY-MM)" required
                            value="2025-01">
                        <input type="text" name="endMonth" placeholder="End Month (Optional)">
                    </div>
                    <button type="submit" class="primary">Create Template</button>
                </form>
            </div>
            <div class="panel" style="margin-top: 2rem;">
                <h3>All Templates</h3>
                <div class="table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Category</th>
                                <th>Amount</th>
                                <th>Active</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="list-templates"></tbody>
                    </table>
                </div>
            </div>
        </section>


        <!-- Month Plan View -->
        <section id="view-month" class="view hidden">
            <div class="view-header">
                <h2>Monthly Plan</h2>
                <div class="header-actions">
                    <div class="budget-input">
                        <label>Budget:</label>
                        <input type="number" id="salary-input" placeholder="0" step="0.01"
                            onchange="App.saveSalary(this.value)">
                    </div>
                    <button class="primary" onclick="App.generateMonth()">Generate from Templates</button>
                </div>
            </div>
            <div class="toolbar">
                <button onclick="App.changeMonth(-1)">‚Üê Prev</button>
                <input type="month" id="month-picker" onchange="App.loadMonth(this.value)">
                <button onclick="App.changeMonth(1)">Next ‚Üí</button>
            </div>
            <div id="month-status-bar"></div>
            <div class="table-wrapper">
                <table class="data-table" id="month-table">
                    <thead>
                        <tr>
                            <th width="15%">Category</th>
                            <th width="30%">Name</th>
                            <th width="15%">Planned</th>
                            <th width="15%">Actual</th>
                            <th width="5%">Paid</th>
                            <th>Notes</th>
                        </tr>
                    </thead>
                    <tbody id="month-items-body"></tbody>
                    <tfoot>
                        <tr class="total-row">
                            <td colspan="2">Total</td>
                            <td id="total-planned">0</td>
                            <td id="total-actual">0</td>
                            <td></td>
                            <td id="total-diff">0</td>
                            <td></td>
                        </tr>
                    </tfoot>
                </table>
            </div>
            <div class="manual-add">
                <h4>Add One‚Äëoff Item</h4>
                <form onsubmit="App.createManualItem(event)" class="inline-form">
                    <select name="categoryId" id="manual-cat-select" required></select>
                    <input type="text" name="name" placeholder="Name" required>
                    <input type="number" name="plannedAmount" placeholder="Planned" required>
                    <button type="submit">Add</button>
                </form>
            </div>
        </section>
    </main>
    <script src="app.js"></script>
</body>

</html>